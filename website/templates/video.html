{% extends "base.html" %}
{% block title %}
SignIn
{% endblock %}
{% block css %}
<link rel="stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/video.css') }}">
    <title>Video Chat</title>
        <script src='https://meet.jit.si/external_api.js'></script>
{%  endblock %}
{% block content %}
<button id="start" type="button" >Start a new Meet</button>
      <div id="jitsi-container" style="width: 100%;height: 100%;">
      </div>
      
      <script>
      var button = document.querySelector('#start');
      var container = document.querySelector('#jitsi-container');
      var api = null;
      
      button.addEventListener('click', () => {
          var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
          var stringLength = 30;
          document.getElementById('start').style.visibility = "hidden";
      
          function pickRandom() {
          return possible[Math.floor(Math.random() * possible.length)];
          }
      
      var randomString = Array.apply(null, Array(stringLength)).map(pickRandom).join('');
      
          var domain = "meet.jit.si";
          var options = {
              "roomName": randomString,
              "parentNode": container,
              "max-width": 1000,
              "height": 900,
          };
          api = new JitsiMeetExternalAPI(domain, options);
      });
      
      </script>
{% endblock %}